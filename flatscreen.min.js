function runFlatscreen(e,n,s){function a(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}function t(e){for(var n=e.length-1;n>=0;n--)target=document.getElementById(e[n]),target.parentNode.removeChild(target)}function i(e,n){var s=y.concat(e,"YouTube ID: "+n);_gaq.push(s)}function l(e,n){-1===n?i("unstarted",e):0===n?i("ended",e):1===n?i("playing",e):2===n?i("paused",e):3===n?i("buffering",e):5===n&&i("video cued",e)}function c(){console.log("findYTelements");var e="";if(document.getElementsByClassName)e=document.getElementsByClassName("flatscreen");else if(document.querySelectorAll)e=document.querySelectorAll(".flatscreen");else for(var e=[],n="flatscreen",t=document.getElementsByTagName("*"),i=new RegExp("(^|\\s)"+n+"(\\s|$)"),l=t.length-1;l>=0;l--)i.test(t[l].className)&&e.push(t[l]);console.log(e);for(var l=e.length-1;l>=0;l--){var c=e[l].id,r='<div id="'+c+'-wrapper" class="flatscreen-wrapper"></div>';if(void 0===s||" "==s||null===s||1==a(s)){var d='<div title="Click to play" class="invisible-button" id="'+c+'-invisible-button"><img src="//i1.ytimg.com/vi/'+c+'/maxresdefault.jpg" /></div>',p='<div class="loading-screen" id="'+c+'-loading"><div class="loading-spinner" id="'+c+'-spinner"><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span></div><img src="//i1.ytimg.com/vi/'+c+'/maxresdefault.jpg" /></div>';console.log(e[l].id)}else var d='<div title="Click to play" class="invisible-button" id="'+c+'-invisible-button"><img src="'+s+"/"+c+'.jpg" /></div>',p='<div class="loading-screen" id="'+c+'-loading"><div class="loading-spinner" id="'+c+'-spinner"><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span><span class="circles"></span></div><img src="'+s+"/"+c+'.jpg" /></div>';o(c,r,d,p)}}function o(e,s,a,t){console.log("createThumbnail"),document.getElementById(e).innerHTML=s+a+t;var l=document.getElementById(e+"-invisible-button");console.log(l),l.addEventListener?l.addEventListener("click",function(){r(e),console.log("addEventListener fired")}):l.attachEvent&&l.attachEvent("onclick",function(){r(e)}),n===!0&&i("ready for playback",e)}function r(e){n===!0&&i("thumbnail triggered",e),console.log("createLoadingScreen"),removeables=[e+"-invisible-button"],t(removeables),document.getElementById(e+"-loading").style.display="block",d(e)}function d(n){console.log("youtubePlayer"),u=new YT.Player(n+"-wrapper",{height:"100%",width:"100%",videoId:n,playerVars:e,events:{onReady:p,onStateChange:g}}),console.log(u),console.log(n+"-wrapper")}function p(e){console.log("steadyGo");var s=e.target.a.id.match("(.{11})(?:-wrapper)")[1],a=[s+"-loading"];t(a),n===!0&&l(s,e.data)}function g(e){if(console.log("stateChange"),n===!0){var s=e.target.a.id.match("(.{11})(?:-wrapper)")[1];l(s,e.data)}}var u,v=document.createElement("script"),m=document.getElementsByTagName("script")[0],f=document.createElement("div"),y=["_trackEvent","Videos"];if(f.className="loading-screen",v.src="https://www.youtube.com/iframe_api",void 0===e||" "==e||null===e||1==a(e))var e={autohide:1,color:"white",controls:1,disablekb:0,modestbranding:0,showinfo:0,theme:"light"};if(e.wmode="transparent",e.autoplay=1,e.rel=0,m.parentNode.insertBefore(v,m),n===!0&&"undefined"==typeof _gaq)var n=!1;c()}